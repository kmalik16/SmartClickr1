$(document).ready(function(){var e=parseInt($("#counter").val());var t="";$("#pollName").focus();$("#edit_content").ready(function(){$(this).submit(function(){if(false==saveAndQuit($(this))){return false}})});saveAndQuit=function(e){var t=$("#pollName").val().trim();isValid=true;if(t==""){$("#poll_info").find(".error").hide();format='<div class="alert alert-error fade in">';format+="<strong>Yikes!</strong> Your poll needs a name. ";format+="</div>";$("#pollName").removeClass("errorBorder").addClass("errorBorder");$("#pollNameLabel").after(format);isValid=false}return isValid};$("#save_quitBtn").click(function(){var e=$("#userId").val();var t=$("#pollId").val();var n,r,i,s,o,u,a,f;var l=0;s=[];a=[];u=[];i=[];f=[];u.push($("#pollId").val());u.push($("#pollName").val());u.push($("#pollDescription").val());$(".question_wrap").each(function(e){r="";n="";l++;if($(this).children("h3").text()=="Multiple Choice"){var t=[];f=[];o=[];i.push("MC");if($(this).find(".questionID").length==1){a.push($(this).children(".questionID").val());$(".mc_response",this).each(function(e){f.push($(this).parent().children("[type=hidden]").val())})}n=$(this).children("textarea").val().trim();$(".mc_response",this).each(function(e){o.push($(this).val())});t.push(n);t.push(o);if(f.length>0)t.push(f);s.push(t)}else if($(this).children("h3").text()=="True/False"){var u=[];f=[];i.push("TF");n=$(this).children("textarea").val().trim();if($(this).find(".questionID").length==1){a.push($(this).children(".questionID").val());if($(".choice_id",this).length>0)f.push($(".choice_id",this).val())}u.push(n);r=$("input[name=correct_answer"+l.toString()+"]:checked").parent().text();if(r=="True"||r=="False")u.push(r);if(f.length>0)u.push(f);s.push(u)}else if($(this).children("h3").text()=="Free Response"){i.push("FR");n=$(this).children("fieldset").children("textarea").val().trim();s.push(n);if($(this).find(".questionID").length==1){a.push($(this).children(".questionID").val())}}else{i.push("N");n=$(this).children("fieldset").children("textarea").val().trim();s.push(n);if($(this).find(".questionID").length==1){a.push($(this).children(".questionID").val())}}});console.log(s);console.log(a);$.ajax({type:"POST",url:"/user/"+e+"/poll/edit/"+t,data:{questionType:i,questions:s,pollData:u,questionIDs:a},success:function(){window.location.href="/"}})});$("#multipleChoiceBtn").click(function(){var t="<article id='multipleChoice_question"+e+"' class='question_wrap overlay'>";t+="<h3>Multiple Choice</h3>";t+="<span class='close-circle'>";t+="<button type='button', class='close'>";t+="&times";t+="</button>";t+="<span class='close-bg'></span>";t+="</span>";t+="<textarea class='textarea_small' placeholder='What would you like to ask?' />";t+="<div class='top-pad'>";t+="</div>";t+="<fieldset class='six columns'>";t+="<span>a)</span>";t+="<input type='text' class='mc_response' name='question-"+e+"_response-1' placeholder='I am a possible answer'/>";t+="<div class='clear'></div>";t+="<label class='radio'>";t+="Correct Answer";t+="<input type='radio' name='correct_answer' />";t+="</label>";t+="</fieldset>";t+="<fieldset class='six columns'>";t+="<span>b)</span>";t+="<input type='text' class='mc_response' name='question-"+e+"_response-2' placeholder='I am another possible answer'/>";t+="<div class='clear'></div>";t+="<label class='radio'>";t+="Correct Answer";t+="<input type='radio' name='correct_answer' />";t+="</label>";t+="</fieldset>";t+="<fieldset class='six columns'>";t+="<span>c)</span>";t+="<input type='text' class='mc_response' name='question-"+e+"_response-3' placeholder='Yet another possible answer'/>";t+="<div class='clear'></div>";t+="<label class='radio'>";t+="Correct Answer";t+="<input type='radio' name='correct_answer' />";t+="</label>";t+="</fieldset>";t+="<fieldset class='six columns'>";t+="<span>d)</span>";t+="<input type='text' class='mc_response' name='question-"+e+"_response-4' placeholder='Im just like all the others...'/>";t+="<div class='clear'></div>";t+="<label class='radio'>";t+="Correct Answer";t+="<input type='radio' name='correct_answer' />";t+="</label>";t+="</fieldset>";t+="<hr>";$(t).appendTo("#question_container").fadeIn("blind","slow");$("#multipleChoice_question"+e+" textarea").focus();$("button.close").on("click",function(){e--;$(this).parents(".question_wrap").remove()});e++});$("#trueFalseBtn").click(function(){var t="<article id='trueFalse_question"+e+"' class='question_wrap overlay' >";t+="<h3>True/False</h3>";t+="<span class='close-circle'>";t+="<button type='button', class='close'>";t+="&times";t+="</button>";t+="<span class='close-bg'></span>";t+="</span>";t+="<textarea class='textarea_small' placeholder='What would you like to ask?' />";t+="<div class='top-pad'>";t+="</div>";t+="<fieldset class='four columns'>";t+="<label class='radio'>";t+="True";t+="<input type='radio' name='correct_answer' />";t+="</label>";t+="</fieldset>";t+="<fieldset class='four columns'>";t+="<label class='radio'>";t+="False";t+="<input type='radio' name='correct_answer' />";t+="</label>";t+="</fieldset>";t+="<fieldset class='four columns'>";t+="<label class='radio'>";t+="No correct answer";t+="<input type='radio' name='correct_answer' />";t+="</label>";t+="</fieldset>";t+="<hr>";$(t).appendTo("#question_container").fadeIn("blind");$("#trueFalse_question"+e+" textarea").focus();$("button.close").on("click",function(){e--;$(this).parents(".question_wrap").remove()});e++});$("#freeResponseBtn").click(function(){var t="<article id='freeResponse_question"+e+"' class='question_wrap overlay'>";t+="<h3>Free Response</h3>";t+="<span class='close-circle'>";t+="<button type='button', class='close'>";t+="&times";t+="</button>";t+="<span class='close-bg'></span>";t+="</span>";t+="<fieldset>";t+="<textarea class='fr_response' name='question-"+e+"' cols='30' rows='5' placeholder='What would you like to ask?' />";t+="</fieldset>";t+="<hr>";$(t).hide().appendTo("#question_container").fadeIn("blind");$("#freeResponse_question"+e+" textarea").focus();$("button.close").on("click",function(){e--;$(this).parents(".question_wrap").remove()});e++});$("#freeResponseNumericBtn").click(function(){var t="<article id='freeResponseNumeric_question"+e+"' class='question_wrap overlay''>";t+="<h3>Numeric Free Response</h3>";t+="<span class='close-circle'>";t+="<button type='button', class='close'>";t+="&times";t+="</button>";t+="<span class='close-bg'></span>";t+="</span>";t+="<fieldset>";t+="<textarea class='fr_response' name='question-"+e+"' cols='30' rows='5' placeholder='What would you like to ask?' />";t+="</fieldset>";t+="<hr>";$(t).appendTo("#question_container").fadeIn("blind");$("#freeResponseNumeric_question"+e+" textarea").focus();$("button.close").on("click",function(){e--;$(this).parents(".question_wrap").remove()});e++});$(".add_correct").click(function(){var t=$(this);if(t.is(":checked")){$("#add_correct-"+e).hide();e++}});$("button.close",this).click(function(){var e=$(this).parents(".question_wrap").children("input.questionID").val();var t=$("#userId").val();var n=$("#pollId").val();var r=$(this).parents(".question_wrap");$.ajax({type:"POST",url:"/user/"+t+"/poll/"+n+"/question/delete/"+e,success:function(){r.remove()}})})})